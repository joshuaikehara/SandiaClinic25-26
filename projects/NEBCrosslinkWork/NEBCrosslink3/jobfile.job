#!/bin/bash
#SBATCH --job-name=NEBCrosslink3
#SBATCH -p RM-shared
#SBATCH -N 1
#SBATCH --ntasks=60
#SBATCH -t 14:00:00

module purge
module load gcc/10.2.0
module load openmpi/4.0.5-gcc10.2.0
module load intel-mkl

ulimit -s unlimited

# 3. Handle the library paths
export LD_LIBRARY_PATH=$MKLROOT/lib/intel64:$LD_LIBRARY_PATH

cd /ocean/projects/mat250017p/desantos/projects/NEBCrosslinkWork/NEBCrosslink3

# Use --overload-allowed if you really want to run 60 tasks on fewer than 60 cores
# But for DFT (SeqQuest), it's better to run 1 task per 1 physical core.
mpirun -np $SLURM_NTASKS --bind-to none /ocean/projects/mat250017p/desantos/seqquest_parallel/quest_265a.x